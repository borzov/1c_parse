# Парсер банковских выписок 1С

Простая программа для анализа банковских операций из файлов 1С ClientBankExchange.

## Что делает

Читает файлы банковских выписок в формате 1С и создает удобные отчеты:
- Годовой отчет по контрагентам с детализацией по годам и организациям
- Сравнительный отчет между организациями

## Установка

### Через uv (рекомендуется)

```bash
# Установите uv если еще не установлен
curl -LsSf https://astral.sh/uv/install.sh | sh

# Клонируйте репозиторий
git clone <repository-url>
cd 1c_parse

# Установите зависимости
uv sync

# Запустите программу
uv run python -m src
```

### Через venv (альтернативный способ)

```bash
# Создайте виртуальное окружение
python -m venv venv

# Активируйте его
# На Windows:
venv\Scripts\activate
# На macOS/Linux:
source venv/bin/activate

# Установите зависимости
pip install -r requirements.txt

# Запустите программу
python -m src
```

## Как использовать

1. Поместите файлы банковских выписок (формат .txt) в папку с программой
2. Запустите программу
3. Выберите нужные файлы для анализа
4. Получите HTML отчеты в папке `reports/`

## Что анализируется

- **Контрагенты**: автоматически определяются и нормализуются названия
- **Организации**: программа сама находит ваши организации в выписках
- **Операции**: разделяются на приход и расход
- **Периоды**: группировка по годам и месяцам
- **ИНН и ОПФ**: извлечение и классификация организаций

## Отчеты

### Годовой отчет
- Список всех контрагентов с суммами операций
- Детализация по годам и организациям
- Фильтры по периоду, сумме, количеству операций
- Графики трендов и распределения
- Поиск по названию и ИНН

### Сравнительный отчет
- Взаимодействие между вашими организациями
- Тепловая карта интенсивности операций
- Графики распределения по ОПФ
- Детальная информация по каждой паре организаций

## Фильтры и возможности

- **Период**: выбор дат для анализа
- **Организации**: включение/исключение конкретных организаций
- **Суммы**: фильтр по размеру операций
- **Количество**: фильтр по числу операций
- **Поиск**: быстрый поиск по названию или ИНН
- **Сохранение**: состояние фильтров сохраняется в URL

## Структура проекта

```
1c_parse/
├── src/                    # Исходный код
│   ├── __main__.py        # Главный файл
│   ├── config.py          # Конфигурация
│   ├── parser_1c.py       # Парсер файлов 1С
│   ├── processing.py      # Обработка данных
│   ├── normalization.py   # Нормализация названий
│   ├── reporting.py       # Генерация отчетов
│   └── utils.py          # Вспомогательные функции
├── templates/             # HTML шаблоны отчетов
├── reports/              # Сгенерированные отчеты
└── requirements.txt      # Зависимости Python
```

## Требования

- Python 3.8+
- Файлы выписок в формате 1С ClientBankExchange (.txt)

## Разработка

Для разработчиков:

```bash
# Установка dev-зависимостей
uv sync --dev

# Запуск тестов
uv run pytest

# Форматирование кода
uv run black src/
uv run isort src/

# Проверка стиля
uv run flake8 src/
```


## Лицензия

MIT License